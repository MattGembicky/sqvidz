<!DOCTYPE html>
<html lang="cs">
	<head>
		<title>SQVIDZ.io</title>
		<link rel="icon" type="image/png" href="/public/img/red_tentacle.png" size="16x16 32x32">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<meta name="Content-Language" content="cs">
		<meta name="Author" content="Matous Gembicky">
		<meta name="KeyWords" content="octopus, squid, game, .io, frined, party">
		<meta name="Description" content="Try to slap your frined with tentacle">
		<script src="https://kit.fontawesome.com/53b570c0b2.js" crossorigin="anonymous"></script> 
		<link rel="stylesheet" type="text/css" href="/public/sqvidz.css">
		<link rel="stylesheet" type="text/css" href="/public/sqvidz-static.css">
		<link rel="stylesheet" type="text/css" href="/public/sqvidz-loginPage.css">
		
	</head>
	<body onload="webLoaded()">
		<div class="gameParts">
			<canvas id="ctx" width="1920" height="1020"></canvas>
			<canvas id="ctx-score" width="100" height="50"></canvas>
			<canvas id="ctx-info" width="200" height="100"></canvas>
	
			<div class="upgrade-board">
				<div class="upg_btn upg_mid upg_fir upg_sI upg_s" onclick="getUpgrade(1,1,1)" up-title="Stealth">first</div>
				<div class="upg_btn upg_left upg_sec upg_sII upg_s" onclick="getUpgrade(1,2,0)" up-title="duration +1s">1</div>
				<div class="upg_btn upg_mid upg_ae upg_sec upg_sII upg_s" onclick="getUpgrade(1,2,1)" up-title="AE duration +1s, speed boost +2">2</div>
				<div class="upg_btn upg_right upg_ae upg_sec upg_sII upg_s" onclick="getUpgrade(1,2,2)" up-title="AE duration +2s, speed boost +1">3</div>
				<div class="upg_btn upg_left upg_for upg_sIV upg_s" onclick="getUpgrade(1,4,0)" up-title="duration +2s">1</div>
				<div class="upg_btn upg_mid upg_ae upg_for upg_sIV upg_s" onclick="getUpgrade(1,4,1)" up-title="AE speed boost +2">2</div>
				<div class="upg_btn upg_right upg_ae upg_for upg_sIV upg_s" onclick="getUpgrade(1,4,2)" up-title="AE duration +2s">3</div>
				<div class="upg_btn upg_left upg_fif upg_sV upg_s" onclick="getUpgrade(1,5,0)" up-title="duration forever">1</div>
				<div class="upg_btn upg_right upg_ae upg_fif upg_sV upg_s" onclick="getUpgrade(1,5,2)" up-title="AE duration 5s, speed boost 6">3</div>
				<div class="upg_btn upg_mid upg_six upg_sVI upg_s" onclick="getUpgrade(1,6,1)" up-title="">2</div>

				<div class="upg_btn upg_mid upg_fir upg_sI upg_s" onclick="getUpgrade(2,1,0)" up-title="Ink of slowness">sec 1</div>
				<div class="upg_btn upg_mid upg_fir upg_sI upg_s" onclick="getUpgrade(2,1,2)" up-title="Ink of speed">sec 2</div>

				<div class="upg_btn upg_left upg_sec upg_sII upg_s" onclick="getUpgrade(2,2,0)" up-title="slowed by 1 more">1</div>
				<div class="upg_btn upg_mid upg_ae upg_sec upg_sII upg_s" onclick="getUpgrade(2,2,1)" up-title="AE duration 2s">2</div>

				<div class="upg_btn upg_mid upg_sec upg_sII upg_s" onclick="getUpgrade(2,2,2)" up-title="speed boost +3">3</div>
				<div class="upg_btn upg_right upg_sec upg_sII upg_s" onclick="getUpgrade(2,2,3)" up-title="duration +2s">4</div>

				<div class="upg_btn upg_right upg_thi upg_sIII upg_s" onclick="getUpgrade(2,3,1)" up-title="blinding">3</div>

				<div class="upg_btn upg_left upg_for upg_sIV upg_s" onclick="getUpgrade(2,4,0)" up-title="slowed by 3 more">1</div>
				<div class="upg_btn upg_mid upg_ae upg_for upg_sIV upg_s" onclick="getUpgrade(2,4,1)" up-title="AE duration +2">2</div>

				<div class="upg_btn upg_mid upg_for upg_sIV upg_s" onclick="getUpgrade(2,4,2)" up-title="speed boost 6">3</div>
				<div class="upg_btn upg_left upg_for upg_sIV upg_s" onclick="getUpgrade(2,4,3)" up-title="duration 4s">4</div>

				<div class="upg_btn upg_right upg_fif upg_sV upg_s" onclick="getUpgrade(2,5,2)" up-title="ink lasts +2s">3</div>
				<div class="upg_btn upg_mid upg_six upg_sVI upg_s" onclick="getUpgrade(2,6,1)" up-title="">2</div>
			</div>

			<div class="blinding"></div>

			<div id="chatnlb-container">
				<h2 style="border-top: 0;background-color: #b00e59;">Leaderboard</h2>
					<div id="lb-box"></div>
				<h2 style="background-color: #046263;">CHAT</h2>
					<div id="chat-box"></div>
					<form id="chat-form" style="background-color: #044252;">
						<input id="chat-input" type="text" placeholder="type here">
						<button class="chat-submit submit" type="submit"><i class="fas fa-comment"></i></button>
					</form>
			</div>
		</div>

		<div class="login">
			<div class="logo">
				<h1 class="name-sqvidz" style="left: 50%;transform: translate(-100%,0);">SQV</h1>
					<img class="sqvidTacle" src="/public/img/red_tentacle.png" alt="sqvidTacle">
				<h1 class="name-sqvidz">DZ.io</h1>
			</div>

			<div class="login-box-conatainer">
				<ul><!--tabulky loginu a stylizovani-->
					<li><!--registrace a login-->
						<div class="login-box">
							<form id="loginRegister-form">
								<input class="name-box register-username" type="text" maxlength="20" placeholder="username" style="margin-top: 10%;">
								<input class="name-box register-password" type="password" maxlength="30" placeholder="password">
								<input class="name-box register-password" type="password" maxlength="30" placeholder="password again">
								<input class="name-submit submit register-submit" type="submit" value="Register">
								<span class="logreg-text">Alreday have account? <span class="logreg-click" onclick="loginOrRegisterForm(true);">Login</span></span>
							</form>
							<form id="loginLogin-form" style="display: none;">
								<input class="name-box login-username" type="text" maxlength="20" placeholder="username" style="margin-top: 10%;">
								<input class="name-box login-password" type="password" maxlength="30" placeholder="password">
								<input class="name-submit submit login-submit" type="submit" value="Login">
								<span class="logreg-text">Don't have account? <span class="logreg-click" onclick="loginOrRegisterForm(false);">Register</span></span>
							</form>
							<span class="LoginMessageBox"></span>
						</div>
					</li>
					<li><!--tlacitko play a nickname-->
						<div class="login-box">
							<span class="balance-middle"></span>
							<i class="fas fa-question-circle"></i>
							<i class="fas fa-sign-out-alt" onclick="logout();" style="display: none;"></i>
							<form id="username-play-form">
								<input class="name-box username" type="text" maxlength="20" placeholder="username" style="margin-top: 40%;">
								<input class="name-submit submit" type="submit" value="Play">
							</form>
							<p class="name-border">Make sure that you can see all tentacles</p>
						</div>
					</li>
					<li><!--vyber vzhledu-->
						<div class="login-box">
							<form id="pick-form">
								<input type="button" class="pickSwitch" name="so" value="OCTOPUS" onclick="pickswitch()"><!--UPRAVIT-->
								<div class="pickClothing"><!--vyber obleceni-->
									<i class="pickClo fas fa-hat-cowboy" onclick="displayClothes(0)"></i><br>
										<div class="lister">
											<div class="listerheader"></div>
											<i class="fas fa-chevron-left" onclick="hatchange(-1)"></i>
												<img class="hats" src="/public/img/cowboy_hat.png">
												<img class="hats" src="/public/img/none.png" style="border-bottom: 2px solid #000000; padding-bottom: 2px;">
												<img class="hats" src="/public/img/cowboy_hat2.png">
											<i class="fas fa-chevron-right" onclick="hatchange(1)"></i>
										</div>
									<i class="pickClo fab fa-black-tie" onclick="displayClothes(1)"></i><br>
										<div class="lister">
											<div class="listerheader"></div>
											<i class="fas fa-chevron-left" onclick="dresschange(-1)"></i>
												<img class="dress" src="/public/img/cowboy_guns.png">
												<img class="dress" src="/public/img/none.png" style="border-bottom: 2px solid #000000; padding-bottom: 2px;">
												<img class="dress" src="/public/img/cowboy_scarf.png">
											<i class="fas fa-chevron-right" onclick="dresschange(1)"></i>
										</div>
								</div>

								<img class="styleMeHat" src=""><!--zobrazeni vyberu vzhledu-->
								<img class="styleMe" src="/public/img/Red.gif" alt="Styling">
								<img class="styleMeDress" src="">

								<div class="pickColor"><!--Vyber vyhledu pomoci vlasnich radio buttonu-->
									<div class="control-group">
										<label class="control control-radio"> 
											<input class="colorSO" type="radio" name="colorch" />
											<div class="control_indicator" onclick="changeCalamari(0)"></div>
										</label>
									</div><br>
									<div class="control-group">
										<label class="control control-radio">
											<input class="colorSO" type="radio" name="colorch" />
											<div class="control_indicator" onclick="changeCalamari(1)" style="background-color: #046263;"></div>
										</label>
									</div><br>
									<div class="control-group">
										<label class="control control-radio">
											<input class="colorSO" type="radio" name="colorch" />
											<div class="control_indicator" onclick="changeCalamari(2)" style="background-color: #514d73;"></div>
										</label>
									</div><br>
									<div class="control-group">
										<label class="control control-radio">
											<input class="colorSO" type="radio" name="colorch" />
											<div class="control_indicator" onclick="changeCalamari(3)" style="background-color: #736c4d;"></div>
										</label>
									</div><br>
									<div class="control-group">
										<label class="control control-radio">
											<input class="colorSO" type="radio" name="colorch" />
											<div class="control_indicator" onclick="changeCalamari(4)" style="background-color: #576947;"></div>
										</label>
									</div>
								</div>

								<div class="SaveToMiddle">
									<input class="name-submit submit pickSubmit" type="submit" value="Save">
								</div>
							</form>
						</div>
					</li>
					</div>
				</ul>
			</div>
		</div>
		<div class="cookieAcc">
			<form id="cookie-form">
				<p>Why we want your click on 'ACCEPT'?</p>
				<p>Our Cookies is there only for your comfortabel. We are storing squid or octopus customization like color or hats.</p>
				<input class="name-submit submit" type="submit" value="Accept" style="display: inline-block;margin-right: 15em;">
			</form>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
		<script>
			var myDatabaseId = undefined;
			window.onload = function(){
				loginPageSET();
			};

			function loginPageSET(){
				let setTentacleImageByDayTime = function(){
					let fullDate = new Date();
					let hoursNow = fullDate.getHours();
					let tentacle = document.getElementsByClassName("sqvidTacle")[0];
					if((hoursNow>=18&&hoursNow<=24)||(hoursNow>=0&&hoursNow<=6))
						tentacle.src ="/public/img/blue_tentacle.png";						
				}
				let setStyleAndNameFromYourCookies = function(){
					document.getElementsByClassName("username")[0].value=getCookie("username");
					if(getCookie("type")===1)
						pickswitch();
					let i = 0;
					i = parseInt(getCookie("color"))-1;
					document.getElementsByClassName("colorSO")[i].checked=true;
					changeCalamari(i);
					if(getCookie("hat"))
						hatchange(getCookie("hat")-1);
					if(getCookie("dress"))
						dresschange(getCookie("dress")-1);
				}
				let displayLoginPage = function(){
					document.getElementsByClassName("cookieAcc")[0].style.display="none";
					document.getElementsByTagName("body")[0].style.overflow="auto";
					document.getElementsByClassName("login")[0].style.display="block";
				}
				let notLogedFromCookie = function(){
					displayLoginPage();
					if(getCookie("username")){
						setStyleAndNameFromYourCookies();
					}
				}

				setTentacleImageByDayTime();
				if(getCookie("clicked")){
					if(getCookie("cookieForLogin")){
						let getCookies = getCookie("cookieForLogin");
						let Timer = setTimeout(function(){//jestlize se po 7 sekundach nepodari prihlasit z cookie
							if(cookieLoginDone){
								cookieLoginDone = false;
								document.getElementsByClassName("login")[0].style.display="block";
								setCookie("cookieForLogin","",0);
								notLogedFromCookie();
							}
						}, 7000);
						socket.emit('LoginFromCookie',{loginCookie: getCookies});
				        displayLoginPage();
				        document.getElementsByClassName("login")[0].style.display="none";
					}else{
						notLogedFromCookie();
					}
				}
			}

			function pickswitch(){//UPRAVIT
				let pswitch = document.getElementsByClassName("pickSwitch")[0];
				if(pswitch.value==="SQUID"){
					pswitch.value="OCTOPUS";
					pswitch.style.backgroundColor="#b00e59";
					CALAMARI=0;
				}else{
					pswitch.value="SQUID";
					pswitch.style.backgroundColor="#046263";
					CALAMARI=1;
				}
			}

			function changeCalamari(n){
				let sources = ["Red.gif","Blue.gif","Violet.gif","Yellow.gif","Green.gif"];
				if(CALAMARI===0)
					document.getElementsByClassName("styleMe")[0].src="/public/img/"+sources[n];
			}
			var CALAMARI = 0;

			function ctxDisplayEverythingAtRightPosition(){
				let w = window.innerWidth;
				let h = window.innerHeight;
				let ctx = document.getElementById("ctx");
				let score = document.getElementById("ctx-score");
				let table = document.getElementById("chatnlb-container");
				let viewconst = 8.5;
				if(w/16>h/viewconst){
					ctx.style.height="100vh";
					ctx.style.width="auto";
					score.style.top="93%";
					table.style.right=(w-1920*h/1020+20)+"px";
				}else if(w/16<h/viewconst){
					ctx.style.width="100vw";
					ctx.style.height="auto";
					score.style.top=(w/1600/h*viewconst*100*93)+"%";
					table.style.right=2+"%";
				}
				if(w<900||h<420)
					table.style.display="none";
				else
					table.style.display="block";
				if(w<1020){
					table.style.top="2%";
					document.getElementById("chat-box").style.height="20%";
				}
			}

			document.getElementById("username-play-form").onsubmit = function(e){
				e.preventDefault();
				let nameBox = document.getElementsByClassName("username")[0];
				let emitInformationsToServerForSettingUpPlayerPLUSsetAllStylesAndNameToCookies = function(){
					let pswitch = document.getElementsByClassName("pickSwitch")[0];
					let chosen = 0;
					for(let i = 0;i<5;i++)
						if(document.getElementsByClassName("colorSO")[i].checked)
							chosen = i+1;
					let dbid = myDatabaseId;
					if(dbid===undefined)
						dbid="NaL";
					socket.emit('usernameIn',{DBid: dbid, username: nameBox.value ,color: chosen, calamari: CALAMARI, hat: currHat, dress: currDress});
					setCookie("username",nameBox.value,30);
					setCookie("color",chosen,30);
					setCookie("type",CALAMARI,30);
					setCookie('clicked',true,30);
					setCookie("hat",currHat,30);
					setCookie("dress",currDress,30);
				}
				let hideLoginPageAndStart = function(){
					document.getElementsByClassName("login")[0].style.display="none";
					document.getElementsByClassName("gameParts")[0].style.display="block";
					document.getElementsByTagName("body")[0].style.overflow="hidden";
					ctxDisplayEverythingAtRightPosition();
				}

				if(nameBox.value.length>2){
					emitInformationsToServerForSettingUpPlayerPLUSsetAllStylesAndNameToCookies();
					hideLoginPageAndStart();
				}else{
					document.getElementsByClassName("name-border")[0].innerHTML+="<span style=\"color: red;\"><br>Username is too short, try 3 or more character one</span>";
				}				
			}

			document.getElementById("pick-form").onsubmit = function(e){
				e.preventDefault();
				let nameBox = document.getElementsByClassName("username")[0];
				let emitInformationsToServerForSettingUpPlayerPLUSsetAllStylesAndNameToCookies = function(){
					let pswitch = document.getElementsByClassName("pickSwitch")[0];
					let chosen = 0;
					for(let i = 0;i<5;i++)
						if(document.getElementsByClassName("colorSO")[i].checked)
							chosen = i+1;
					let myHat = currHat;let myDress = currDress;
					if(currHat<10){
						myHat= "00"+currHat;
					}else if(currHat<100){
						myHat = "0"+currHat;
					}
					if(currDress<10){
						myDress= "00"+currDress;
					}else if(currDress<100){
						myDress = "0"+currDress;
					}
					let superString = CALAMARI+""+chosen+""+myHat+""+myDress;
					if(myDatabaseId!==undefined)
						socket.emit('saveCustomization',{username: nameBox.value, custom: superString, id: myDatabaseId});
					setCookie("username",nameBox.value,30);
					setCookie("color",chosen,30);
					setCookie("type",CALAMARI,30);
					setCookie("hat",currHat,30);
					setCookie("dress",currDress,30);
				}		
				if(nameBox.value.length>2){
					emitInformationsToServerForSettingUpPlayerPLUSsetAllStylesAndNameToCookies();
				}else
					document.getElementsByClassName("name-border")[0].innerHTML+="<span style=\"color: red;\"><br>Username is too short, try 3 or more character one</span>";
			}


			document.getElementById("loginRegister-form").onsubmit = function(e){
				e.preventDefault();
				let getUsername = document.getElementsByClassName("register-username")[0];
				if(getUsername.value.length<3){
					document.getElementsByClassName("LoginMessageBox")[0].innerHTML = "Username is too short, try 3 or more character one";
					return 1;
				}
				let getPasswordF = document.getElementsByClassName("register-password")[0];
				let getPasswordS = document.getElementsByClassName("register-password")[1];
				if(getPasswordF.value.length<5){
					document.getElementsByClassName("LoginMessageBox")[0].innerHTML = "Password is too short";
					return 1;
				}else if(getPasswordF.value!==getPasswordS.value){
					document.getElementsByClassName("LoginMessageBox")[0].innerHTML = "Passwords do not match";
					return 1;
				} 

				//pokud vse projde
				socket.emit('RegisterNew',{username: getUsername.value, password: getPasswordF.value});
			}

			document.getElementById("loginLogin-form").onsubmit = function(e){
				e.preventDefault();
				let getUsername = document.getElementsByClassName("login-username")[0];
				if(getUsername.value.length>2){
					let getPassword = document.getElementsByClassName("login-password")[0];
					socket.emit('LoginNow',{username: getUsername.value, password: getPassword.value});
				}else
					document.getElementsByClassName("LoginMessageBox")[0].innerHTML = "Username of 2 or less characters can\'t exists";
			}

			function logout(){
				document.getElementsByClassName("login")[0].style.display="none";
				setCookie("cookieForLogin",undefined,0);
				location.reload();
				loginPageSET();
				document.getElementsByClassName("login")[0].style.display="block";
			}

			function displayClothes(n){//picekry na customizace pri kliknuti na ikonku
				if(n!==listClothes){
					document.getElementsByClassName("lister")[0].style.display="none";
					document.getElementsByClassName("lister")[1].style.display="none";
					document.getElementsByClassName("lister")[n].style.display="block";
					let value = -3.2 + 2.9*n;
					document.getElementsByClassName("lister")[n].style.top=value+"em";
					document.getElementsByClassName("lister")[n].style.left=0;
					listClothes = n;
					if(n===0)
						document.getElementsByClassName("listerheader")[0].style.backgroundColor="#b00e59";
					else if(n===1)
						document.getElementsByClassName("listerheader")[0].style.backgroundColor="#046263";
				}
				else{
					document.getElementsByClassName("lister")[n].style.display="none";
					listClothes = -1;	
				}
			}
			var listClothes = -1;//referencni hodnota
			
			function dragElement(elmnt){//ciste zkopirovana funkce z W3schools pro dragable elementy
				let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
				if(document.getElementsByClassName(elmnt.class + "header")[listClothes]){
					document.getElementsByClassName(elmnt.class + "header")[listClothes].onmousedown = dragMouseDown;
				}else{
					elmnt.onmousedown = dragMouseDown;
				}
				function dragMouseDown(e){
					e = e || window.event;
					e.preventDefault();
					pos3 = e.clientX;
					pos4 = e.clientY;
					document.onmouseup = closeDragElement;
					document.onmousemove = elementDrag;
				}
				function elementDrag(e){
					e = e || window.event;
					e.preventDefault();
					pos1 = pos3 - e.clientX;
					pos2 = pos4 - e.clientY;
					pos3 = e.clientX;
					pos4 = e.clientY;
					elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
					elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
				}
				function closeDragElement(){
					document.onmouseup = null;
					document.onmousemove = null;
				}
			}
			// Make the DIV element draggable:
			dragElement(document.getElementsByClassName("lister")[0]);
			dragElement(document.getElementsByClassName("lister")[1]);

			function hatchange(n){
				currHat += n;
				let num = hatsources.length;
				if(currHat===num)
					currHat = 0;
				if(currHat===-1)
					currHat = num-1;
				document.getElementsByClassName("hats")[0].src = hatsources[currHat-1];
				document.getElementsByClassName("hats")[1].src = hatsources[currHat]; 
				document.getElementsByClassName("hats")[2].src = hatsources[currHat+1];
				if(currHat===0)
					 document.getElementsByClassName("hats")[0].src = hatsources[num-1];
				if(currHat===num-1)
					 document.getElementsByClassName("hats")[2].src = hatsources[0];
				if(hatsources[currHat]!=="/public/img/none.png"){
					document.getElementsByClassName("styleMeHat")[0].style.display="block";
					document.getElementsByClassName("styleMeHat")[0].src = hatsources[currHat];
				}
				else
					document.getElementsByClassName("styleMeHat")[0].style.display="none";
			}
			var currHat = 1;
			const hatsources = ["/public/img/cowboy_hat.png","/public/img/none.png","/public/img/cowboy_hat2.png"];

			function dresschange(n){
				currDress += n;
				let num = dresssources.length;
				if(currDress===num)
					currDress = 0;
				if(currDress===-1)
					currDress = num-1;
				document.getElementsByClassName("dress")[0].src = dresssources[currDress-1];
				document.getElementsByClassName("dress")[1].src = dresssources[currDress]; 
				document.getElementsByClassName("dress")[2].src = dresssources[currDress+1];
				if(currDress===0)
					 document.getElementsByClassName("dress")[0].src = dresssources[num-1];
				if(currDress===num-1)
					 document.getElementsByClassName("dress")[2].src = dresssources[0];
				if(dresssources[currDress]!=="/public/img/none.png"){
					document.getElementsByClassName("styleMeDress")[0].style.display="block";
					document.getElementsByClassName("styleMeDress")[0].src = dresssources[currDress];
				}
				else
					document.getElementsByClassName("styleMeDress")[0].style.display="none";
			}
			var currDress = 1;
			const dresssources = ["/public/img/cowboy_guns.png","/public/img/none.png","/public/img/cowboy_scarf.png","/public/img/cowboy_scarf2.png"];
			
			window.onresize = function(event){
				ctxDisplayEverythingAtRightPosition();
			}

			function loginOrRegisterForm(login){
				if(login){
					document.getElementById("loginLogin-form").style.display = "block";
					document.getElementById("loginRegister-form").style.display = "none";
				}
				else{
					document.getElementById("loginLogin-form").style.display = "none";
					document.getElementById("loginRegister-form").style.display = "block";
				}
			}
		</script>
		<script type="text/javascript" src="/public/js/game.js"></script>
		<script >
			socket.on('LoginMessage',function(data){
				let colorOfMsg = "green";
				loginOrRegisterForm(true);
				if(!data.success){
					colorOfMsg = "red";
				}
				document.getElementsByClassName("LoginMessageBox")[0].innerHTML = "<span style=\"color: "+colorOfMsg+";\">"+data.message+"</span>";
				document.getElementsByClassName("register-username")[0].value = "";
				document.getElementsByClassName("register-password")[0].value = "";
				document.getElementsByClassName("register-password")[1].value = "";
				document.getElementsByClassName("login-username")[0].value = "";
				document.getElementsByClassName("login-password")[0].value = "";
			});

			var cookieLoginDone = true;
			socket.on('LoginPack',function(data){
				if(cookieLoginDone){
					cookieLoginDone = false;
					myDatabaseId = data.id;
					document.getElementsByClassName("login-box")[0].style.display = "none";
					document.getElementsByClassName("username")[0].value=data.username;
					if(data.custom.substring(0,1)===1)
						pickswitch();
					let i = 0;
					i = parseInt(data.custom.substring(1,2))-1;
					document.getElementsByClassName("colorSO")[i].checked=true;
					changeCalamari(i);
					if(data.custom.substring(2,5)){
						currHat = 1;
						hatchange(parseInt(data.custom.substring(2,5))-1);
					}
					if(data.custom.substring(5,8)){
						currDress = 1;
						dresschange(parseInt(data.custom.substring(5,8))-1);
					}
					let balance = data.balance;
					document.getElementsByClassName("balance-middle")[0].innerHTML = data.balance + "$";
					document.getElementsByClassName("balance-middle")[0].style.display = "inline-table";
					document.getElementsByClassName("fa-sign-out-alt")[0].style.display = "inline-table";
					setCookie("cookieForLogin",data.cookieForLogin,1);
					document.getElementsByClassName("login")[0].style.display="block";
				}
			});
		</script>
		<script type="text/javascript" src="/public/js/chat.js"></script>
		<script type="text/javascript" src="/public/js/cookies.js"></script>
	</body>
</html>